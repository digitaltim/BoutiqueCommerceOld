{"version":3,"sources":["purchaseOrder.js"],"names":["processDesignerSelect","el","removeItemSelect","value","createHiddenInput","options","selectedIndex","text","document","getElementById","itemFormId","callGetDesignerItems","designerId","sendRequest","requestURL","processItemSelect","removeColorSelect","selectedItemId","itemTextArr","split","createColorSelect","processColorSelect","itemId","sizeSelectId","removeSizeSelect","removeQtyTextbox","createSizeSelect","createQtyTextbox","designerItems","JSON","createItemSelect","items","appendToElementId","Array","seasonText","season","i","option","SelectOption","id","optionText","name","push","onChangeAttr","attributes","listId","dlAttr","createDatalistInput","focus","initOption","createSelect","itemSelectId","json","request","parse","responseText","item_id","selected","color","colorSelectId","length","size","processSizeSelect","Attribute","createInput","qtyInputId","createCostTextbox","getItemCost","cost","costInputId","createItemSubmit","itemSubId","qtyEl","qty","className","valid","costEl","itemSelEl","removeChild","itemColorSelEl","itemSizeSelEl","qtyTbEl","removeCostTextbox","removeItemSubmit","costTbEl","subEl","addItem","designerSelectId"],"mappings":"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","file":"purchaseOrder.js","sourcesContent":["//var requestURL = 'https://hello/incld/model/designerPO.json.php';\n//var mainEl = document.getElementById(\"itemForm\"); // todo why doesn't this work?\nvar designerSelectId = 'designerId';\nvar selectedItemId; // to use in fns\nvar designerItems = new Array(); // array of objects returned by json query\nvar itemFormId = 'itemForm';\nvar itemSelectId = 'itemSelect';\nvar colorSelectId = 'colorSelect';\nvar sizeSelectId = 'sizeSelect';\nvar qtyInputId = 'qtyInput';\nvar costInputId = 'costInput';\n\nfunction processDesignerSelect(el) {\n    removeItemSelect();\n    if(el.options[el.selectedIndex].value != 0) {\n        createHiddenInput('designerName', 'designerName', el.options[el.selectedIndex].text, document.getElementById(itemFormId));\n        callGetDesignerItems(el.options[el.selectedIndex].value);\n    }\n}\n\nfunction callGetDesignerItems(designerId) {\n    sendRequest(requestURL+'?action=getDesignerItems&designerId='+designerId, buildItems);\n}\n\nfunction processItemSelect(el) {\n    removeColorSelect();\n    selectedItemId = el.options[el.selectedIndex].value;\n    if(selectedItemId != 0) {\n        // separate style number and name\n        var itemTextArr = el.options[el.selectedIndex].text.split(\" :: \");\n        createHiddenInput('styleNumber', 'styleNumber', itemTextArr[0], document.getElementById(itemFormId));\n        createHiddenInput('itemName', 'itemName', itemTextArr[1], document.getElementById(itemFormId));\n        sendRequest(requestURL + '?action=getItemColors&itemId=' + selectedItemId, createColorSelect);\n    }\n}\n\nfunction processColorSelect(el, itemId) {\n    if (document.getElementById(sizeSelectId)) {\n        removeSizeSelect();\n    }\n    else {\n        removeQtyTextbox();\n    }\n    if (el.options[el.selectedIndex].value != 0) {\n        createHiddenInput('colorName', 'colorName', el.options[el.selectedIndex].text, document.getElementById(itemFormId));\n        sendRequest(requestURL + '?action=getItemSizes&itemId=' + itemId, createSizeSelect);\n    }\n}\n\nfunction processSizeSelect(el) {\n    removeQtyTextbox();\n    if (el.options[el.selectedIndex].value != 0) {\n        createHiddenInput('sizeName', 'sizeName', el.options[el.selectedIndex].text, document.getElementById(itemFormId));\n        createQtyTextbox();\n    }\n}\n\nfunction buildItems(request) {\n    designerItems = JSON.parse(request.responseText);\n    createItemSelect(designerItems, itemFormId);\n}\n\n/**\n * NOT CURRENTLY IN USE possible datalist\n * @param items\n * @param appendToElementId\n */\nfunction createItemSelectDL(items, appendToElementId) {\n    var options = new Array();\n    //var initOption = new SelectOption('0', 'select item');\n    //options.push(initOption);\n    for (var i = 0; i < items.length; i++) {\n        var seasonText = items[i].season;\n        if (seasonText == 'null' || seasonText == null) {\n            seasonText = '';\n        }\n        var optionText = items[i].style_number+' :: '+items[i].name+' :: '+seasonText;\n        var option = new SelectOption(items[i].id, optionText);\n        options.push(option);\n    }\n    var attributes = new Array();\n    var onChangeAttr = new Attribute(\"onchange\", \"processItemSelect(document.getElementById(this.id));\");\n    attributes.push(onChangeAttr);\n    var listId = \"itemList\";\n    var dlAttr = new Attribute(\"list\", listId);\n    attributes.push(dlAttr);\n    createDatalistInput(listId, \"itemInput\", \"itemInput\", options, document.getElementById(appendToElementId), attributes);\n    document.getElementById(\"itemInput\").focus();\n}\n\nfunction createItemSelect(items, appendToElementId) {\n    var options = new Array();\n    var initOption = new SelectOption('0', 'select item');\n    options.push(initOption);\n    for (var i = 0; i < items.length; i++) {\n        var seasonText = items[i].season;\n        if (seasonText == null) {\n            seasonText = 'N/A';\n        }\n        var optionText = items[i].style_number+' :: '+items[i].name+' :: '+seasonText;\n        var option = new SelectOption(items[i].id, optionText);\n        options.push(option);\n    }\n    var attributes = new Array();\n    var onChangeAttr = new Attribute(\"onchange\", \"processItemSelect(document.getElementById(this.id));\");\n    attributes.push(onChangeAttr);\n    createSelect(itemSelectId, itemSelectId, options, document.getElementById(appendToElementId), attributes);\n    document.getElementById(itemSelectId).focus();\n}\n\nfunction createColorSelect(request) {\n    var json = JSON.parse(request.responseText);\n    var options = new Array();\n    var initOption = new SelectOption('0', 'select color');\n    options.push(initOption);\n    var itemId;\n    for (var i = 0; i < json.length; i++) {\n        itemId = json[i].item_id;\n        var selected;\n        if (json.length == 1) {\n            selected = true;\n        }\n        else {\n            selected = false;\n        }\n        var option = new SelectOption(json[i].id, json[i].color, selected);\n        options.push(option);\n    }\n    var attributes = new Array();\n    var onChangeAttr = new Attribute(\"onchange\", \"processColorSelect(document.getElementById(this.id), \"+itemId+\");\");\n    attributes.push(onChangeAttr);\n    createSelect(colorSelectId, colorSelectId, options, document.getElementById(itemFormId), attributes);\n    document.getElementById(colorSelectId).focus();\n    // if only 1 option it gets selected and processed\n    if (selected) {\n        processColorSelect(document.getElementById(colorSelectId), itemId);\n    }\n}\n\nfunction createSizeSelect(request) {\n    var json = JSON.parse(request.responseText);\n    if (json.length == 0) {\n        createQtyTextbox();\n        return;\n    }\n    var options = new Array();\n    var initOption = new SelectOption('0', 'select size');\n    options.push(initOption);\n    for (var i = 0; i < json.length; i++) {\n        var selected = (i == 0) ? true : false;\n        var option = new SelectOption(json[i].id, json[i].size, selected);\n        options.push(option);\n    }\n    var attributes = new Array();\n    var onChangeAttr = new Attribute(\"onchange\", \"processSizeSelect(document.getElementById(this.id));\");\n    attributes.push(onChangeAttr);\n    createSelect(sizeSelectId, sizeSelectId, options, document.getElementById(\"itemForm\"), attributes);\n    document.getElementById(sizeSelectId).focus();\n    processSizeSelect(document.getElementById(sizeSelectId));\n}\n\nfunction createQtyTextbox() {\n    var attributes = new Array();\n    attributes.push(new Attribute(\"type\", \"number\"));\n    attributes.push(new Attribute(\"min\", 1));\n    attributes.push(new Attribute(\"max\", 99));\n    attributes.push(new Attribute(\"placeholder\", 'qty'));\n    attributes.push(new Attribute(\"value\", 1));\n    createInput(qtyInputId, qtyInputId, document.getElementById(\"itemForm\"), attributes);\n    document.getElementById(qtyInputId).focus();\n    createCostTextbox();\n}\n\nfunction getItemCost() {\n    for (var i = 0; i < designerItems.length; i++) {\n        if (designerItems[i].id == selectedItemId) {\n            //console.log(JSON.stringify(designerItems));\n            return designerItems[i].cost;\n        }\n    }\n}\n\nfunction createCostTextbox() {\n    var defaultValue = getItemCost();\n    var attributes = new Array();\n    attributes.push(new Attribute(\"type\", \"number\"));\n    attributes.push(new Attribute(\"min\", .01));\n    attributes.push(new Attribute(\"max\", 9999));\n    attributes.push(new Attribute(\"step\", \".01\"));\n    attributes.push(new Attribute(\"placeholder\", 'cost'));\n    attributes.push(new Attribute(\"value\", defaultValue));\n    createInput(costInputId, costInputId, document.getElementById(\"itemForm\"), attributes);\n    document.getElementById(costInputId).focus();\n    createItemSubmit();\n}\n\nfunction createItemSubmit() {\n    var attributes = new Array();\n    attributes.push(new Attribute(\"type\", \"submit\"));\n    attributes.push(new Attribute(\"value\", 'Add Item'));\n    attributes.push(new Attribute(\"onclick\", \"if(!validateItemForm()){return false;}\"));\n    createInput(itemSubId, itemSubId, document.getElementById(\"itemForm\"), attributes);\n    document.getElementById(itemSubId).focus();\n}\n\nfunction validateItemForm() {\n    var valid = true;\n    var qtyEl = document.getElementById(qtyInputId);\n    var qty = qtyEl.value;\n    if (qty == '' || qty == 0) {\n        qtyEl.className = 'errorField';\n        qtyEl.focus();\n        valid = false;\n    }\n    else if (qtyEl.className == 'errorField') {\n        qtyEl.className = '';\n    }\n    var costEl = document.getElementById(costInputId);\n    var cost = costEl.value;\n    if (cost == '' || cost == 0) {\n        costEl.className = 'errorField';\n        costEl.focus();\n        valid = false;\n    }\n    else if (costEl.className == 'errorField') {\n        costEl.className = '';\n    }\n    return valid;\n}\n\nfunction removeItemSelect() {\n    var itemSelEl = document.getElementById(itemSelectId);\n    if (itemSelEl) {\n        if (itemSelEl.value != '0') {\n            /*\n             if (!confirm('remove items?')) {\n             return false;\n             }\n             */\n            removeColorSelect();\n            removeSizeSelect();\n        }\n        document.getElementById(\"itemForm\").removeChild(itemSelEl);\n    }\n}\n\nfunction removeColorSelect() {\n    var itemColorSelEl = document.getElementById(colorSelectId);\n    if (itemColorSelEl) {\n        document.getElementById(\"itemForm\").removeChild(itemColorSelEl);\n        if (document.getElementById(sizeSelectId)) {\n            removeSizeSelect();\n        }\n        else {\n            removeQtyTextbox();\n        }\n    }\n}\n\nfunction removeSizeSelect() {\n    var itemSizeSelEl = document.getElementById(sizeSelectId);\n    if (itemSizeSelEl) {\n        document.getElementById(\"itemForm\").removeChild(itemSizeSelEl);\n        removeQtyTextbox();\n    }\n}\n\nfunction removeQtyTextbox() {\n    var qtyTbEl = document.getElementById(qtyInputId);\n    if (qtyTbEl) {\n        document.getElementById(\"itemForm\").removeChild(qtyTbEl);\n    }\n    removeCostTextbox();\n}\n\nfunction removeCostTextbox() {\n    var costTbEl = document.getElementById(costInputId);\n    if (costTbEl) {\n        document.getElementById(\"itemForm\").removeChild(costTbEl);\n    }\n    removeItemSubmit();\n}\n\nfunction removeItemSubmit() {\n    var subEl = document.getElementById(itemSubId);\n    if (subEl) {\n        document.getElementById(\"itemForm\").removeChild(subEl);\n    }\n}\n\n// called to add a new item select box and skip designer select\nfunction addItem(designerId) {\n    callGetDesignerItems(designerId);\n}"]}