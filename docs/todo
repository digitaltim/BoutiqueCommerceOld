1) work on todo list (i can't    get          out)

finish infrastructure functionality

- FORMFORMER
-- escape all outputs from form inputs and/or database fields from form inputs
-- escape value='' using attribute method (anything else?)

- ADMIN NAVIGATION
-- fix html errors - many bottom </div> match nothing
-- item configurability
-- messaging (flash? may be able to simply pass from controller to view). update: flash messages only work on redirect, try using $_SESSION['adminMessages'][] (array so we can have multiple). another update, not sure whether we should use flash messaging for this or at all. may be more useful (and pretty easy) to populate $_SESSION['adminMessages'][] and make it globally available to twig, then spit it back and empty it.
-- nav should not show in sign in page (admin dir)
-- make sure {LOCAL TESTING} appears only for dev (use islive in env)

- AUTHENTICATION
-- change to use FF, new Validator, and AdminsModel (look at example in vendor and CrudView formgenerate(). Also call queries from Model)
-- the sign up page has to input all of the admins db fields, including the employee_id join (not required). it should be renamed 'Create Admin'. we'll also need an 'Edit Admin' page which will use basically the same form.
-- All admin pages should route through ($config['dirs']['admin'])
-- upon successful login set response to desired route/page
-- are fns in It_All\BoutiqueCommerce\Auth\Auth.php still being used? consider moving them or some of them to the model or elsewhere. Delete unused fns. Definitely at least move queries to model.
-- consider refactoring the signup/in methods/templates in views/controllers & twig. They are almost identical... DRY
-- check failure condition for inserting new admin



- AUTHORIZATION
-- (page level, admin nav, functionality - ie only owner/director can enter new admins - see DbTable::hasInsertPermission())
-- create ADMINS page like old system to change passwords and add new users
-- change admins.permissions to admins.role as a varchar (50) that is controlled in the app - enum var with options: (Owner, Director, Manager, Admin, Store, Vendor, Bookkeeper) Shipper(?)
-- only owner/director can insert new admins (see Authorization)

- OUTPUT
-- change all twig output files to extend base.twig

- DO I UNDERSTAND THE FRAMEWORK
-- What does registering controller / factories in dependencies do? When they are commented out the script still runs. it makes them available to use in controllers or views (wherever the container is passed). some testing probably still in order on this.
-- What services need instantiation in base classes, ex. Controller and AdminView? (plus DRY)

- DOCUMENTATION
-- Build docs section in nav...
--- structure (which docs will be displayed in the admin nav section (help) and which in the GitHub page (developer resources)?)
-- Create installation instructions

- How should gulp autogenerated files be handled in version control? Ex. commits for js/scss mods (get .map files - ignore? what about frontend js/css?) (This appears to be a setup/install issue where we define how to use and setup gulp... Needs to be defined in the installation instructions)

- Create database backup script by modifying existing script. Add instructions how to use. Ex. (cron?)

- Create custom 'Page Not Found' error page that gives the name of the store (config[store_name] and additional detail as needed. Ex. https://btq/CRUD/testimonials/delete/

- Configure application/apache to ignore trailing slashes in URLs

- Use pathFor() functionality to create named routes. Ex. in CrudView index function for new UiRsDbTable?

*update: to maximize performance, routes should not be grouped (https://github.com/slimphp/Slim/issues/2165). Ungrouped 5/17.
- Group the routes for
-- Naming simplification
-- Using authorization middleware (similar to the authentication middleware)

- Validation
-- Refactor Validator::isDbDate() and isDbTimestamp using Regex
-- Consider use cases for Respect/Validation vs. integrated based on Simple Validator... Should we use the simple for everthing when the decision to switch was based on getting validation in CRUD working? --> UPDATE - This is actually about getting the validation in FF working, not CRUD. Since we have lots of forms to build and we're going to try FF, it will be much easier to use our own validator based on SV than respect's validator. I don't think our validation needs are very complex for most forms. For complex needs, we can write a custom validation function on a per form basis.
-- refactor $this->newvalidator calls in CRUD after above decision.

- In /utilities/functions.php
-- Remove unused functions. remove functions based on old page controller model that don't apply to front controller.
-- Find a better place for getFormFieldFromDbColumn()

- CODING STANDARDS
-- Should we use docblocks for all classes, methods, properties (?)
-- use typehints on params and return params

- MONOLOG EVENT LOGGING
- for: create new admin, admin log in, admin log in attempts exceeded

- INFRASTRUCTURE
-- how to prevent xss from rogue admins? (chunk of html problem: https://www.perl.com/pub/2002/02/20/css.html). does twig prevent it or does |raw thwart that? => using |raw is potentiall unsafe: https://vivait.co.uk/labs/safely-escape-twigs-json_encode-without-using-raw
-- fork infrastructure to a new repo
-- the schema should only contain the admins table and maybe a test table in the forked repo

- Improve directory structure: (?) *, **
* possible directory structure
BoutiqueCommerce
.gitignore
composer.json
composer.lock
gulpfile.js
LICENSE.md
postgresDump.sql
-app
-routes.php
--config
--controllers
--infrastructure
--Auth.php
---database
---services
--middleware
--models
--public
--services
--ui
--utilities
-docs
-node_modules
-prebuild
-storage
-vendor

** alternate possible dir struct
BoutiqueCommerce
.gitignore
composer.json
composer.lock
LICENSE.md
README.md
pgDbSchemaDump.sql
-src
 -public
  .htaccess
  index.php
  -css..
  -js..
 -infrastructure
  NavAdmin.php
  -CRUD
   CrudController.php
   CrudView.php
  -Authentication
   AuthenticationController.php
   AuthenticationView.php
   AuthenticationMiddleware.php
   GuestMiddleware.php
  -Authorization..
  -Database
   DbTable.php
   DbColumn.php
   PgDbAccessService.php
   -QueryBuilder
    QueryBuilder.php
    InsertUpdateBuilder.php
    InsertBuilder.php
    UpdateBuilder.php
  -Utilities
   ValidatorService.php
   PhpMailerService.php
   MessagingAdmin.php (? - flash)
 -config..
  routes.php
 -domain (ie biz)
  Nav.php
  -BusinessObjects
   OrdersModel.php
   CustomersModel.php
   ..
  -Views
   -Admin.. (pages ie OrdersListView.php)
   -Public.. (pages ie AboutUsView.php)
 -templates
-docs..
-prebuild
 gulpfile.js
 -node_modules
 -js..
 -scss..

-vendor..
-storage
 -cache..
 -logs..
-ignored


OTHER
- Explore https://pages.github.com/
- Explore https://github.com/features/project-management/
- Possibly ask some of the "Do I understand" questions on Slim forum to get answers.